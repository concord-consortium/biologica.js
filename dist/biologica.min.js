(function(){var e,d,a,c={}.hasOwnProperty,b=[].indexOf||function(h){for(var g=0,f=this.length;g<f;g++){if(g in this&&this[g]===h){return g}}return -1};Array.prototype.remove=function(h,g){var f;f=this.slice((g||h)+1||this.length);this.length=h<0?this.length+h:h;return this.push.apply(this,f)};Array.prototype.removeObj=function(g){var f;f=this.indexOf(g);if(~f){this.remove(f);return true}else{return false}};Array.prototype.replaceFirst=function(g,f){return this[this.indexOf(g)]=f};Array.prototype.shuffle=function(){var h,f,g;g=this.length;if(g){while(--g){h=Math.floor(Math.random()*(g+1));f=this[h];this[h]=this[g];this[g]=f}}return this};e=function(h,g){var f;f=h.indexOf(g);if(f>=0){h.splice(f,1);return true}else{return false}};d=function(i){var h,f,g;g=i.length;if(g){while(--g){h=Math.floor(Math.random()*(g+1));f=i[h];i[h]=i[g];i[g]=f}}return i};window.ExtMath={};ExtMath.randomInt=function(f){return Math.floor(Math.random()*f)};ExtMath.flip=function(){return ExtMath.randomInt(2)};window.BioLogica={};BioLogica.FEMALE=1;BioLogica.MALE=0;BioLogica.combinations=function(n){var h,s,p,j,o,k,i,g,f,q;q=[];p=n[0];if(n.length===1){return p.slice(0)}s=BioLogica.combinations(n.slice(1));for(j=0,o=s.length;j<o;j++){h=s[j];if(typeof h==="string"){h=[h]}for(i=0,k=p.length;i<k;i++){g=p[i];f=h.slice(0);f.unshift(g);q.push(f)}}return q.slice(0)};BioLogica.Chromosome=(function(){function f(g,q,p,k){var o,n,j,h,r,m;this.species=g;this.chromosome=q;m=[];this.alleles=k.sort((function(i){return function(s,l){if(i.getAllelesPosition(s)>i.getAllelesPosition(l)){return 1}else{return -1}}})(this)).filter((function(i){return function(l){var s;s=i.getGeneOfAllele(l);if(m.indexOf(s)!==-1){if(typeof console!=="undefined"&&console!==null){console.warn("Duplicate allele found: "+l)}return false}m.push(s);return true}})(this));if(typeof p==="object"){this.side=p[0]}else{this.side=p}this.allelesWithSides=[];for(n=j=0,h=this.alleles.length;0<=h?j<h:j>h;n=0<=h?++j:--j){o=this.alleles[n];r=typeof p==="object"?p[n]:this.side;this.allelesWithSides.push({allele:o,side:r})}}f.prototype.clone=function(g){return new BioLogica.Chromosome(this.species,this.chromosome,g||this.side,this.alleles.slice(0))};f.prototype.lengthInCentimorgans=100;f.prototype.getlengthInBasePairs=function(){return this.species.chromosomesLength[this.chromosome]};f.prototype.getGeneOfAllele=function(g){var h;return(h=BioLogica.Genetics.getGeneOfAllele(this.species,g))!=null?h.name:void 0};f.prototype.getAllelesPosition=function(g){var i,h;i=this.getGeneOfAllele(g);return((h=this.species.geneList[i])!=null?h.start:void 0)||-1};f.prototype.replaceAllele=function(h,i){var g;g=this.alleles.indexOf(h);if(g>=0){return this.alleles[g]=i}};return f})();BioLogica.Chromosome.createChromosome=function(r,p,k){var g,s,q,m,h,o,j,n,f;j=[];n=[];q=[];f=r.alleles;for(m=h=0,o=f.length;h<o;m=++h){g=f[m];if(r.getAllelesPosition(g)<k){j.push(g);n.push(r.allelesWithSides[m].side)}else{j.push(p.alleles[m]);n.push(p.allelesWithSides[m].side);q.push([g,p.alleles[m]])}}s=new BioLogica.Chromosome(r.species,r.chromosome,n,j);s.crossedAlleles=q;return s};BioLogica.Genotype=(function(){function f(l,g,j){var i,h,n,k,m;this.sex=j;this.chromosomes={};this.allAlleles=[];for(h in g){if(!c.call(g,h)){continue}m=g[h];this.chromosomes[h]={};for(k in m){if(!c.call(m,k)){continue}i=m[k];if(k==="y"){i=[]}this.chromosomes[h][k]=new BioLogica.Chromosome(l,h,k,i.slice(0));this.allAlleles=this.allAlleles.concat(i.slice(0))}}if(this.sex==null){this.sex=((n=this.chromosomes.XY)!=null?n.y:void 0)!=null?BioLogica.MALE:BioLogica.FEMALE}}f.prototype.containsAlleles=function(i){var k,j,h,g;k=this.allAlleles.slice(0);if(this.sex===BioLogica.MALE){k.push("Y")}for(h=0,g=i.length;h<g;h++){j=i[h];if(!e(k,j)){return false}}return true};f.prototype.replaceAlleleChromName=function(g,j,k,l){var h,i;i=this.chromosomes[g];h=(i!=null)&&i[j];if(h!=null){return this.replaceAllele(h,k,l)}};f.prototype.replaceAllele=function(g,i,j){var h;g.replaceAllele(i,j);h=this.allAlleles.indexOf(i);if(h>=0){return this.allAlleles[h]=j}};f.prototype.getAlleleString=function(o,n){var g,s,m,u,z,t,w,x,v,y,j,k,r,q,p,h;if(o==null){o=[]}if(n==null){n=null}s="";k=this.chromosomes;for(z in k){if(!c.call(k,z)){continue}w=k[z];for(h in w){if(!c.call(w,h)){continue}t=w[h];m=t.alleles;j=h==="x"?"y":h==="x1"?"x2":"b";if(h==="x"||h==="x1"){h="a"}if(h!=="a"){continue}for(x=v=0,y=m.length;v<y;x=++v){g=m[x];if((o.length===0)||(r=n.geneForAllele(g),b.call(o,r)>=0)){s+=h+":"+g+",";if(w[j]){u=(q=w[j])!=null?q.alleles[x]:void 0;if(u){s+="b:"+((p=w[j])!=null?p.alleles[x]:void 0)+","}}}}}}return s.substring(0,s.length-1)};return f})();BioLogica.Genetics=(function(){function f(j,h,i){var g;this.species=j;this.alleles=h;g=typeof this.alleles==="string"?this.convertAlleleStringToGenotypeHash(this.alleles,i):this.alleles;this.topUpChromosomes(g);this.genotype=new BioLogica.Genotype(this.species,g,i)}f.prototype.convertAlleleStringToGenotypeHash=function(v,s){var j,o,u,g,n,q,p,k,i,r,h,t;t=BioLogica.Genetics.parseAlleleString(v);g={};i=this.species.chromosomeNames;for(n=0,q=i.length;n<q;n++){u=i[n];g[u]={};h=this.getSides(u,s);g[u][h[0]]=[];g[u][h[1]]=[]}for(r in t){if(!c.call(t,r)){continue}o=t[r];if(!o){continue}for(k=0,p=o.length;k<p;k++){j=o[k];if(~j.indexOf("/")){j=this.selectOption(j)}u=this.findChromosome(j);if(!u){continue}h=this.getSides(u,s);g[u][r==="a"?h[0]:h[1]].push(j)}}return g};f.prototype.selectOption=function(g){var i,j,h;j=(function(){var m,k,o,n;o=g.split("/");n=[];for(m=0,k=o.length;m<k;m++){i=o[m];n.push(i.trim())}return n})();h=Math.floor(Math.random()*j.length);return j[h]};f.prototype.getAlleleString=function(){return this.genotype.getAlleleString()};f.prototype.getAlleleStringForTrait=function(p){var q,h,j,m,k,n,i,o,g;n=[];h=[];g=this.species.traitRules[p];for(m in g){if(!c.call(g,m)){continue}j=g[m];h=h.concat(j.reduce(function(r,l){return r.concat(l)},[]))}h=h.reduce(function(l,r){if(l.indexOf(r)<0){l.push(r)}return l},[]);for(i=0,o=h.length;i<o;i++){q=h[i];k=this.geneForAllele(q);if(b.call(n,k)<0){n.push(this.geneForAllele(q))}}return this.genotype.getAlleleString(n,this)};f.prototype.topUpChromosomes=function(g){var k,h,m,l,j,i;j=[];for(k in g){if(!c.call(g,k)){continue}h=g[k];l=this.species.chromosomeGeneMap[k];j.push((function(){var o,n,p;p=[];for(o=0,n=l.length;o<n;o++){m=l[o];p.push((function(){var q;q=[];for(i in h){if(!c.call(h,i)){continue}if(!(this.chromosomeContainsGene(g[k][i],m)||i==="y")){q.push(g[k][i].push(this.getRandomAllele(m)))}else{q.push(void 0)}}return q}).call(this))}return p}).call(this))}return j};f.prototype.getSides=function(g,h){if(g!=="XY"){return["a","b"]}else{if(h===BioLogica.FEMALE){return["x1","x2"]}else{return["x","y"]}}};f.prototype.isAlleleOfGene=function(g,j){var i,k,h;h=this.species.geneList;for(k in h){if(!c.call(h,k)){continue}i=this.species.geneList[k].alleles;if(b.call(i,g)>=0&&b.call(i,j)>=0){return true}}return false};f.prototype.geneForAllele=function(g){var i,j,h;h=this.species.geneList;for(j in h){if(!c.call(h,j)){continue}i=this.species.geneList[j].alleles;if(b.call(i,g)>=0){return j}}};f.prototype.findChromosome=function(k){var i,n,j,h,g,m;m=this.species.chromosomeGeneMap;for(i in m){j=m[i];for(h=0,g=j.length;h<g;h++){n=j[h];if(this.isAlleleOfGene(k,n)){return i}}}return false};f.prototype.chromosomeContainsGene=function(i,k){var j,h,g;for(h=0,g=i.length;h<g;h++){j=i[h];if(this.isAlleleOfGene(j,k)){return true}}return false};f.prototype.getRandomAllele=function(k){var g,j,l,h,i;i=this.species.geneList;for(l in i){if(!c.call(i,l)){continue}g=this.species.geneList[l].alleles;if(b.call(g,k)>=0){j=g;break}}h=Math.floor(Math.random()*j.length);return j[h]};f.prototype.filter=function(g,h){return g.filter((function(i){return function(m){var n,k,j;for(k=0,j=h.length;k<j;k++){n=h[k];if(i.isAlleleOfGene(m,n)){return true}}return false}})(this))};f.prototype.performMeiosis=function(s){var g,n,y,F,t,w,A,q,r,k,v,G,C,B,z,D,x,p,u,h,E,o;n=[{},{},{},{}];v={};G={};p=this.genotype.chromosomes;for(t in p){if(!c.call(p,t)){continue}A=p[t];o={};E=["b2","b1","a2","a1"];q=false;for(h in A){if(!c.call(A,h)){continue}w=A[h];o[E.pop()]=w.clone();o[E.pop()]=w.clone();if(h==="y"){q=true}}k=null;if(s&&!q){k=this.crossover(o)}E=d(["b2","b1","a2","a1"]);G[t]={};for(C=z=0,D=n.length;z<D;C=++z){g=n[C];F=E[C];y=o[F];if(!s){y.side=this.getHaploidChromatidSide(y)}g[t]=y;G[t][F]=C;if(k!=null){for(B=x=0,u=k.length;0<=u?x<u:x>u;B=0<=u?++x:--x){r=k[B];if(r.start===F){r.start_cell=C}if(r.end===F){r.end_cell=C}}}}v[t]=k}return{cells:n,crossInfo:v,endCellInfo:G}};f.prototype.getHaploidChromatidSide=function(g){if(g.side==="b"){return"a"}else{if(g.side==="x1"||g.side==="x2"){return"x"}else{return g.side}}};f.prototype.crossover=function(g){var m,k,o,h,j,p,n,i;m=this.createCrossoverPoints(g.a1);k=[];for(h=0,j=m.length;h<j;h++){n=m[h];i=["a1","a2"][ExtMath.flip()];o=["b1","b2"][ExtMath.flip()];p=this.crossChromatids(g[i],g[o],n);g[i]=p[0];g[o]=p[1];k.push({start:i,end:o,point:n,crossedAlleles:p[0].crossedAlleles.slice(0)})}return k};f.prototype.crossChromatids=function(i,h,g){return[BioLogica.Chromosome.createChromosome(i,h,g),BioLogica.Chromosome.createChromosome(h,i,g)]};f.prototype.createCrossoverPoints=function(n){var k,p,m,h,o,g,q,j;j=Math.floor(n.lengthInCentimorgans/10);p=(function(){var i,s,r;r=[];for(m=i=0,s=j;0<=s?i<s:i>s;m=0<=s?++i:--i){if(Math.random()<0.2){r.push(m)}}return r})();while(p.length>3){p.splice(ExtMath.randomInt(p.length),1)}g=n.getlengthInBasePairs()/j;for(m=h=0,o=p.length;h<o;m=++h){k=p[m];q=ExtMath.randomInt(g);p[m]=(k*g)+q}return p};return f})();BioLogica.Genetics.parseAlleleString=function(g){var h,f;return{a:(h=g.match(/a:([^,])*/g))!=null?h.map(function(j){var i;return(i=j.match(/[^:]+$/))!=null?i[0]:void 0}):void 0,b:(f=g.match(/b:([^,])*/g))!=null?f.map(function(j){var i;return(i=j.match(/[^:]+$/))!=null?i[0]:void 0}):void 0}};BioLogica.Genetics.getGeneOfAllele=function(f,g){var j,i,h;h=f.geneList;for(i in h){if(!c.call(h,i)){continue}j=h[i];if(~j.alleles.indexOf(g)){j.name=i;return j}}};BioLogica.Genetics.collectAllAllelesForTrait=function(m,o){var g,h,f,k,l,n,j;f={};h=[];for(k in o[m]){for(j in o[m][k]){if(o[m][k].hasOwnProperty(j)){l=0;n=o[m][k][j].length;while(l<n){f[o[m][k][j][l]]=1;l++}}}}for(g in f){h.push(g)}return h};BioLogica.Genetics.collectAllGenesForCharacteristic=function(m,j,p){var g,f,l,k,o,h,n;n=p.traitRules;f={};l=[];for(h in n[m][j]){if(n[m][j].hasOwnProperty(h)){k=0;o=n[m][j][h].length;while(k<o){f[n[m][j][h][k]]=1;k++}}}for(g in f){l.push(BioLogica.Genetics.getGeneOfAllele(p,g))}l=l.reduce(function(i,q){if(i.indexOf(q)<0){i.push(q)}return i},[]);return l};BioLogica.Phenotype=(function(){function f(j){var n,k,o,h,m,g,i,p;this.characteristics={};this.allCharacteristics=[];i=j.species.traitRules;for(p in i){if(!c.call(i,p)){continue}g=i[p];for(m in g){if(!c.call(g,m)){continue}h=g[m];for(k=0,o=h.length;k<o;k++){n=h[k];if(j.genotype.containsAlleles(n)){this.characteristics[p]=m;this.allCharacteristics.push(m);break}}if(this.characteristics[p]){break}}}}return f})();a=function(i,j){var h,g,f;for(h=0,g=i.length;h<g;h++){f=i[h];if(f.indexOf(j)>=0){return true}}return false};BioLogica.Phenotype.numberOfChangesToReachPhenotype=function(g,j,h,k){var f,i;g=BioLogica.Organism.ensureValidOrganism(g,h);j=BioLogica.Organism.ensureValidOrganism(j,h);f=0;if(g.sex!==j.sex){++f;i=g.getAlleleString();if(g.sex===BioLogica.MALE&&(k!=null)){i+=","+k}g=new BioLogica.Organism(h,i,j.sex)}return f+=BioLogica.Phenotype.numberOfAlleleChangesToReachPhenotype(g.phenotype.characteristics,j.phenotype.characteristics,g.genetics.genotype.allAlleles,g.species,g.sex)};BioLogica.Phenotype.numberOfAlleleChangesToReachPhenotype=function(w,p,x,m,r){var g,n,v,B,u,A,E,z,f,y,C,G,D,q,o,F,t,s,h;h=m.traitRules;g=x;G=0;for(s in h){if(h.hasOwnProperty(s)&&(m.subTraits.indexOf(s)<0)){if(w[s]!==p[s]){o=BioLogica.Genetics.collectAllGenesForCharacteristic(s,p[s],m);q=h[s][p[s]];n=[];B=0;u=g.length;while(B<u){for(y=0,C=o.length;y<C;y++){v=o[y];if(BioLogica.Genetics.getGeneOfAllele(m,g[B])===v){n.push(g[B]);continue}}B++}if(r===BioLogica.MALE&&a(q,"Y")){n.push("Y")}F=Infinity;A=0;E=q.length;while(A<E){t=q[A].slice();D=0;z=0;f=n.length;while(z<f){if(t.indexOf(n[z])===-1){D++}else{t.splice(t.indexOf(n[z]),1)}z++}F=D<F?D:F;A++}G+=F}}}return G};BioLogica.Organism=(function(){function f(i,h,g){this.species=i;this.sex=g;this.alleles=typeof h==="string"?this.preProcessAlleleString(h):h;this.genetics=new BioLogica.Genetics(this.species,this.alleles,this.sex);if(this.sex==null){this.sex=this.genetics.genotype.sex}this.resetPhenotype()}f.prototype.getGenotype=function(){return this.genetics.genotype};f.prototype.resetPhenotype=function(){return this.phenotype=new BioLogica.Phenotype(this.genetics)};f.prototype.getCharacteristic=function(g){return this.phenotype.characteristics[g]};f.prototype.getAllCharacteristics=function(){return this.phenotype.allCharacteristics};f.prototype.getImageName=function(){return this.species.getImageName(this)};f.prototype.getAlleleString=function(){return this.genetics.getAlleleString()};f.prototype.getAlleleStringForTrait=function(g){return this.genetics.getAlleleStringForTrait(g)};f.prototype.createGametes=function(o,j){var h,k,g,m;if(j==null){j=true}h=[];for(k=g=0,m=Math.floor(o/4);0<=m?g<m:g>m;k=0<=m?++g:--g){h=h.concat(this.genetics.performMeiosis(j).cells)}h=h.concat(this.genetics.performMeiosis(j).cells.slice(0,o%4));if(h.length===1){return h[0]}else{return h}};f.prototype.createGametesWithCrossInfo=function(o,j){var h,k,g,m;if(j==null){j=true}h=[];for(k=g=0,m=Math.floor(o/4);0<=m?g<m:g>m;k=0<=m?++g:--g){h=h.concat(this.genetics.performMeiosis(j))}if(o%4!==0){h=h.concat(this.genetics.performMeiosis(j))}return h};f.prototype.preProcessAlleleString=function(g){return g.replace(/,+$/,"")};f.prototype.toString=function(){var g,h;h=this.sex===BioLogica.FEMALE?"female":"male";g=this.genetics.genotype.allAlleles;return"Organism: {sex: "+h+", authored alleles: "+this.alleles+", alleles: "+g};return f})();BioLogica.Organism.createOrganism=function(g,f,h){if(f==null){f=""}if(h==null){h=ExtMath.flip()?BioLogica.FEMALE:BioLogica.MALE}return new BioLogica.Organism(g,f,h)};BioLogica.Organism.createLiveOrganism=function(g,f,h){var i;if(f==null){f=""}if(h==null){h=ExtMath.flip()?BioLogica.FEMALE:BioLogica.MALE}i=new BioLogica.Organism(g,f,h);i.species.makeAlive(i);return i};BioLogica.Organism.createFromGametes=function(o,n,h){var l,j,m,g,f,k;for(k in h){g=h[k];if(g.side==="a"){g.side="b"}}for(k in n){g=n[k];if(g.side==="b"){g.side="a"}}if(h.XY.side==="y"){n.XY.side="x"}else{n.XY.side="x1";h.XY.side="x2"}f={};for(m in n){if(!c.call(n,m)){continue}l=n[m];j=h[m];f[m]={};f[m][l.side]=l.alleles;f[m][j.side]=j.alleles}return new BioLogica.Organism(o,f)};BioLogica.Organism.ensureValidOrganism=function(g,f){if(g.getAlleleString){return g}return new BioLogica.Organism(f,g.alleleString,g.sex)};BioLogica.Organism.numberOfBreedingMovesToReachOrganism=function(g,f,w,v,h){var z,x,A,s,y,B,D,u,t,k,l,p,o,r,n,C,q,m;D=0;k=g.getAlleleString().split(",").map(function(i){return i.split(":")[1]});l=f.getAlleleString().split(",").map(function(i){return i.split(":")[1]});C=h.phenotype.characteristics;m=g.species.traitRules;for(q in m){if(m.hasOwnProperty(q)){p=m[q][C[q]];o=Infinity;if(p&&p.length){A=0;s=p.length;while(A<s){r=p[A];u=0;t=0;y=0;B=r.length;while(y<B){z=r[y];x=y%2===0?r[y+1]:r[y-1];n=0;if(k.indexOf(z)===-1){if(z&&(w.indexOf(z)>-1||w.indexOf(z.toLowerCase())>-1)){n++}else{n=Infinity}}if(l.indexOf(x)===-1){if(x&&(v.indexOf(x)>-1||v.indexOf(x.toLowerCase())>-1)){n++}else{n=Infinity}}if(y%2===0){u+=n}else{t+=n}y++}o=Math.min(o,Math.min(u,t));A++}D+=o}}}return D};BioLogica.breed=function(i,h,j){var g,f;g=i.createGametes(1,j);f=h.createGametes(1,j);return BioLogica.Organism.createFromGametes(i.species,g,f)};BioLogica.Species=BioLogica.Species||{};BioLogica.Species.Drake={name:"Drake",chromosomeNames:["1","2","XY"],chromosomeGeneMap:{"1":["t","m","w","h"],"2":["c","b","fl","hl","a"],XY:["d","rh","bog"]},chromosomesLength:{"1":100000000,"2":100000000,XY:70000000},geneList:{tail:{alleles:["T","Tk","t"],start:10000000,length:10584},metallic:{alleles:["M","m"],start:20000000,length:259610},wings:{alleles:["W","w"],start:70000000,length:9094},horns:{alleles:["H","h"],start:85000000,length:19421},color:{alleles:["C","c"],start:15000000,length:64572},black:{alleles:["B","b"],start:25000000,length:17596},forelimbs:{alleles:["Fl","fl"],start:80000000,length:122234},hindlimbs:{alleles:["Hl","hl"],start:85000000,length:6371},armor:{alleles:["A1","A2","a"],start:90000000,length:425156},dilute:{alleles:["D","d"],start:20000000,length:152673},bogbreath:{alleles:["Bog","bog"],start:22000000,length:199642},nose:{alleles:["Rh","rh"],start:60000000,length:2950}},alleleLabelMap:{T:"Long tail",Tk:"Kinked tail",t:"Short tail",M:"Shiny",m:"Dull",W:"Wings",w:"Wingless",H:"Hornless",h:"Horns",C:"Color",c:"Albino",Fl:"Arms",fl:"Armless",Hl:"Legs",hl:"Legless",A1:"Full armor",A2:"Partial armor",a:"No armor",B:"Gray",b:"Orange",D:"Deep",d:"Faded",Rh:"Spiked",rh:"Spikeless",Bog:"Normal",bog:"Bog breath",Y:"Y","":""},traitRules:{armor:{"Five armor":[["A1","A1"],["A1","A2"]],"Three armor":[["A1","a"],["A2","A2"]],"One armor":[["A2","a"]],"No armor":[["a","a"]]},tail:{"Long tail":[["T","T"],["T","Tk"],["T","t"]],"Kinked tail":[["Tk","Tk"],["Tk","t"]],"Short tail":[["t","t"]]},forelimbs:{Forelimbs:[["Fl","Fl"],["Fl","fl"]],"No forelimbs":[["fl","fl"]]},hindlimbs:{Hindlimbs:[["Hl","Hl"],["Hl","hl"]],"No hindlimbs":[["hl","hl"]]},horns:{Hornless:[["H","H"],["H","h"]],Horns:[["h","h"]]},"nose spike":{"Nose spike":BioLogica.combinations([["Rh"],["Rh","rh","Y"]]),"No nose spike":[["rh","rh"],["rh","Y"]]},wings:{Wings:[["W","W"],["W","w"]],"No wings":[["w","w"]]},color:{Frost:[["c","c"]],Steel:BioLogica.combinations([["C"],["C","c"],["M"],["M","m"],["B"],["B","b"],["D"],["D","d","Y"]]),Copper:BioLogica.combinations([["C"],["C","c"],["M"],["M","m"],["b"],["b"],["D"],["D","d","Y"]]),Silver:BioLogica.combinations([["C"],["C","c"],["M"],["M","m"],["B"],["B","b"],["d"],["d","Y"]]),Gold:BioLogica.combinations([["C"],["C","c"],["M"],["M","m"],["b"],["b"],["d"],["d","Y"]]),Charcoal:BioLogica.combinations([["C"],["C","c"],["m"],["m"],["B"],["B","b"],["D"],["D","d","Y"]]),Lava:BioLogica.combinations([["C"],["C","c"],["m"],["m"],["b"],["b"],["D"],["D","d","Y"]]),Ash:BioLogica.combinations([["C"],["C","c"],["m"],["m"],["B"],["B","b"],["d"],["d","Y"]]),Sand:BioLogica.combinations([["C"],["C","c"],["m"],["m"],["b"],["b"],["d"],["d","Y"]])},health:{"Bog breath":[["bog","bog"],["bog","Y"]],Healthy:[["Bog","Bog"],["Bog","bog"],["Bog","Y"]]},metallic:{Shiny:[["M","M"],["M","m"]],Dull:[["m","m"]]},colored:{Colored:[["C","C"],["C","c"]],Albino:[["c","c"]]},black:{Gray:[["B","B"],["B","b"]],Orange:[["b","b"]]},dilute:{Deep:[["D","D"],["D","d"],["D","Y"]],Faded:[["d","d"],["d","Y"]]}},subTraits:["metallic","colored","black","dilute"],getImageName:function(j){var f,i,g,h;g=function(k){return j.getCharacteristic(k)};if(g("liveliness")==="Dead"){return"dead-drake.png"}f="";h=g("color");if(h==="Silver"){h="Argent"}else{if(h==="Lava"){h="Earth"}else{if(h==="Ash"){h="Dust"}}}f+=h.toLowerCase().substring(0,2)+"_";f+=j.sex===BioLogica.FEMALE?"f_":"m_";f+=g("wings")==="Wings"?"wing_":"noWing_";i="";if(g("forelimbs")==="Forelimbs"){if(g("hindlimbs")==="Hindlimbs"){i="allLimb_"}else{i="fore_"}}else{if(g("hindlimbs")==="Hindlimbs"){i="hind_"}else{i="noLimb_"}}f+=i;f+=(function(){switch(g("armor")){case"Five armor":return"a5_";case"Three armor":return"a3_";case"One armor":return"a1_";default:return"a0_"}})();f+=(function(){switch(g("tail")){case"Long tail":return"flair_";case"Kinked tail":return"kink_";default:return"short_"}})();f+=g("horns")==="Horns"?"horn_":"noHorn_";f+=g("nose spike")==="Nose spike"?"rostral_":"noRostral_";f+=g("health")==="Bog breath"?"bogbreath":"healthy";return f+=".png"},makeAlive:function(f){}};BioLogica.Species=BioLogica.Species||{};BioLogica.Species.Dragon={name:"Dragon",chromosomeNames:["1","2","XY"],chromosomeGeneMap:{"1":["h","s"],"2":["w","l","t"],XY:["p","f","a","b"]},chromosomesLength:{"1":100000000,"2":100000000,XY:70000000},geneList:{horns:{alleles:["H","h","HU"],start:5000000,length:5333},scales:{alleles:["S","s"],start:7500000,length:7667},wings:{alleles:["W","w","wd"],start:2769231,length:25128},legs:{alleles:["L","l"],start:4615385,length:19230},tail:{alleles:["T","t","ta"],start:6153846,length:10256},plates:{alleles:["P","p"],start:2333333,length:6000},fire:{alleles:["F","f","fb"],start:3033333,length:26600},color1:{alleles:["A","a","aw"],start:4200000,length:26133},color2:{alleles:["B","b"],start:6020000,length:32200}},alleleLabelMap:{H:"Horns",h:"No horns",HU:"Unicorn",S:"No scales",s:"Scales",W:"No wings",w:"Wings",wd:"Double wings",L:"Legs",l:"No legs",T:"Fancy tail",t:"Plain tail",ta:"Arrow tail",P:"Plates",p:"No plates",F:"No fire",f:"Fire",fb:"Blue fire",A:"Color A",a:"Color a",aw:"Color aw",B:"Color B",b:"Color b",Y:"Y","":""},traitRules:{horns:{Horns:[["H","H"],["H","h"]],"No Horns":[["h","h"]],Unicorn:[["HU","H"],["HU","h"],["HU","HU"]]},scales:{Scales:[["s","s"]],"No Scales":[["S","S"],["S","s"]]},wings:{"Double Wings":[["wd","wd"],["wd","w"]],Wings:[["w","w"],["W","wd"]],"No Wings":[["W","W"],["W","w"]]},legs:{"Four Legs":[["L","L"]],"Two Legs":[["L","l"]],"No Legs":[["l","l"]]},tail:{"Fancy Tail":[["T","T"],["T","t"],["T","ta"]],"Plain Tail":[["t","t"],["t","ta"]],"Arrow Tail":[["ta","ta"]]},fire:{"No Fire":[["F","F"],["F","f"],["F","fb"],["F","Y"]],Fire:[["f","f"],["f","fb"],["f","Y"]],"Blue Fire":[["fb","fb"],["fb","Y"]]},color:{Green:[["A","B","Y"],["A","b","Y"]],Yellow:[["a","B","Y"],["a","b","Y"]],Red:[["A","A","B","B"],["A","a","B","B"]],Purple:[["a","a","B","B"]],Brown:[["A","A","B","b"],["A","A","b","b"],["A","a","B","b"],["A","a","b","b"]],Blue:[["a","a","B","b"],["a","a","b","b"]],Albino:BioLogica.combinations([["aw"],["A","a","aw"],["B","b"],["B","b"]]).concat(BioLogica.combinations([["aw"],["B","b"],["Y"]]))},plates:{"Big Plates":[["P","P"]],"Little Plates":[["P","p"],["P","Y"]],"No Plates":[["p","p"],["p","Y"]]},liveliness:{Alive:[["B","B"],["B","b"],["B","Y"]],Dead:[["b","b"],["b","Y"]]}},getImageName:function(f){return void 0},makeAlive:function(i){var f,h,g;if(i.getCharacteristic("liveliness")==="Dead"){if(i.sex===BioLogica.MALE){f=i.getGenotype().chromosomes.XY["x"]}else{h=i.getGenotype().chromosomes.XY["x1"];g=i.getGenotype().chromosomes.XY["x2"];if(b.call(h.alleles,"b")>=0){if(b.call(g.alleles,"b")>=0){f=ExtMath.flip()?h:g}else{f=h}}else{f=g}}i.getGenotype().replaceAllele(f,"b","B");return i.resetPhenotype()}}};BioLogica.Species=BioLogica.Species||{};BioLogica.Species.GenivilleDrake={name:"GenivilleDrake",chromosomeNames:["1","2","XY"],chromosomeGeneMap:{"1":["t","m","w","h"],"2":["c","b","fl","hl","a"],XY:["d","rh","bog"]},chromosomesLength:{"1":100000000,"2":100000000,XY:70000000},geneList:{tail:{alleles:["T","Tk","t"],start:10000000,length:10584},metallic:{alleles:["M","m"],start:20000000,length:259610},wings:{alleles:["W","w"],start:70000000,length:9094},horns:{alleles:["H","h"],start:85000000,length:19421},color:{alleles:["C","c"],start:15000000,length:64572},black:{alleles:["B","b"],start:25000000,length:17596},forelimbs:{alleles:["Fl","fl"],start:80000000,length:122234},hindlimbs:{alleles:["Hl","hl"],start:85000000,length:6371},armor:{alleles:["A","a"],start:90000000,length:425156},dilute:{alleles:["D","d","dl"],start:20000000,length:152673},bogbreath:{alleles:["Bog","bog"],start:22000000,length:199642},nose:{alleles:["Rh","rh"],start:60000000,length:2950}},alleleLabelMap:{T:"Long tail",Tk:"Kinked tail",t:"Short tail",M:"Metallic",m:"Nonmetallic",W:"Wings",w:"No wings",H:"No horns",h:"Horns",C:"Colored",c:"Colorless",Fl:"Forelimbs",fl:"No forelimbs",Hl:"Hindlimbs",hl:"No hindlimbs",A:"Armor",a:"No armor",B:"Black",b:"Brown",D:"Full color",d:"Dilute color",dl:"dl",Rh:"Nose spike",rh:"No nose spike",Bog:"Healthy",bog:"Bog breath",Y:"Y","":""},traitRules:{armor:{"Five armor":[["A","A"]],"Three armor":[["A","a"]],"No armor":[["a","a"]]},tail:{"Long tail":[["T","T"],["T","Tk"],["T","t"]],"Kinked tail":[["Tk","Tk"],["Tk","t"]],"Short tail":[["t","t"]]},forelimbs:{Forelimbs:[["Fl","Fl"],["Fl","fl"]],"No forelimbs":[["fl","fl"]]},hindlimbs:{Hindlimbs:[["Hl","Hl"],["Hl","hl"]],"No hindlimbs":[["hl","hl"]]},horns:{Hornless:[["H","H"],["H","h"]],Horns:[["h","h"]]},"nose spike":{"Nose spike":BioLogica.combinations([["Rh"],["Rh","rh","Y"]]),"No nose spike":[["rh","rh"],["rh","Y"]]},wings:{Wings:[["W","W"],["W","w"]],"No wings":[["w","w"]]},color:{Frost:[["c","c"]],Steel:BioLogica.combinations([["C"],["C","c"],["M"],["M","m"],["B"],["B","b"],["D"],["D","d","dl","Y"]]),Copper:BioLogica.combinations([["C"],["C","c"],["M"],["M","m"],["b"],["b"],["D"],["D","d","dl","Y"]]),Silver:BioLogica.combinations([["C"],["C","c"],["M"],["M","m"],["B"],["B","b"],["d","dl"],["d","dl","Y"]]),Gold:BioLogica.combinations([["C"],["C","c"],["M"],["M","m"],["b"],["b"],["d","dl"],["d","dl","Y"]]),Charcoal:BioLogica.combinations([["C"],["C","c"],["m"],["m"],["B"],["B","b"],["D"],["D","d","dl","Y"]]),Lava:BioLogica.combinations([["C"],["C","c"],["m"],["m"],["b"],["b"],["D"],["D","d","dl","Y"]]),Ash:BioLogica.combinations([["C"],["C","c"],["m"],["m"],["B"],["B","b"],["d","dl"],["d","dl","Y"]]),Sand:BioLogica.combinations([["C"],["C","c"],["m"],["m"],["b"],["b"],["d","dl"],["d","dl","Y"]])},health:{"Bog breath":[["bog","bog"],["bog","Y"]],Healthy:[["Bog","Bog"],["Bog","bog"],["Bog","Y"]]},liveliness:{Alive:BioLogica.combinations([["D","d"],["D","d","dl","Y"]]),Dead:[["dl","dl"],["dl","Y"]]}},getImageName:function(j){var f,i,g,h;g=function(k){return j.getCharacteristic(k)};if(g("liveliness")==="Dead"){return"dead-GenivilleDrake.png"}f="";h=g("color");if(h==="Silver"){h="Argent"}else{if(h==="Lava"){h="Earth"}else{if(h==="Ash"){h="Dust"}}}f+=h.toLowerCase().substring(0,2)+"_";f+=j.sex===BioLogica.FEMALE?"f_":"m_";f+=g("wings")==="Wings"?"wing_":"noWing_";i="";if(g("forelimbs")==="Forelimbs"){if(g("hindlimbs")==="Hindlimbs"){i="allLimb_"}else{i="fore_"}}else{if(g("hindlimbs")==="Hindlimbs"){i="hind_"}else{i="noLimb_"}}f+=i;f+=(function(){switch(g("armor")){case"Five armor":return"a5_";case"Three armor":return"a3_";default:return"a0_"}})();f+=(function(){switch(g("tail")){case"Long tail":return"flair_";case"Kinked tail":return"kink_";default:return"short_"}})();f+=g("horns")==="Horns"?"horn_":"noHorn_";f+=g("nose spike")==="Nose spike"?"rostral_":"noRostral_";f+=g("health")==="Bog breath"?"bogbreath":"healthy";return f+=".png"},makeAlive:function(i){var h,g,f;if(i.getCharacteristic("liveliness")==="Dead"){f=i.sex===BioLogica.MALE?"x":ExtMath.flip()?"x1":"x2";h=i.getGenotype().chromosomes.XY[f];g=ExtMath.flip()?"D":"d";i.getGenotype().replaceAllele(h,"dl",g);return i.resetPhenotype()}}};BioLogica.Species=BioLogica.Species||{};BioLogica.Species.GGDrake={name:"GGDrake",chromosomeNames:["1","2","XY"],chromosomeGeneMap:{"1":["T3","M2","W2","A2"],"2":["H2","C2","G2","S2"],XY:["D2","F2"]},chromosomesLength:{"1":100000000,"2":100000000,XY:70000000},geneList:{tail:{alleles:["T1","T2","T3"],start:10000000,length:10584},metallic:{alleles:["M1","M2"],start:20000000,length:259610},wings:{alleles:["W1","W2"],start:70000000,length:9094},armor:{alleles:["A1","A2"],start:80000000,length:122234},horns:{alleles:["H1","H2"],start:15000000,length:19421},color:{alleles:["C1","C2"],start:45000000,length:64572},green:{alleles:["G1","G2"],start:55000000,length:17596},spikes:{alleles:["S1","S2"],start:90000000,length:6371},dilute:{alleles:["D1","D2"],start:20000000,length:152673},firebreathing:{alleles:["F1","F2"],start:60000000,length:1000}},alleleLabelMap:{T1:"Long tail",T2:"Kinked tail",T3:"Short tail",M1:"Metallic",M2:"Nonmetallic",W1:"Wings",W2:"No wings",H1:"No horns",H2:"Horns",C1:"Colored",C2:"Colorless",A1:"No armor",A2:"Armor",S1:"Spikes wide",S2:"Spikes narrow",G1:"Green",G2:"Purple",D1:"Full color",D2:"Dilute color",F1:"No fire breathing",F2:"Fire breathing",Y:"Y","":""},traitRules:{tail:{"Long tail":[["T1","T1"],["T1","T2"],["T1","T3"]],"Kinked tail":[["T2","T2"],["T2","T3"]],"Short tail":[["T3","T3"]]},wings:{Wings:[["W1","W1"],["W1","W2"]],"No wings":[["W2","W2"]]},horns:{"Reverse horns":[["H1","H1"],["H1","H2"]],"Forward horns":[["H2","H2"]]},armor:{"No armor":[["A1","A1"],["A1","A2"]],Armor:[["A2","A2"]]},spikes:{"Wide spikes":[["S1","S1"]],"Medium spikes":[["S1","S2"]],"Narrow spikes":[["S2","S2"]]},"fire breathing":{"No fire breathing":[["F1"]],"Fire breathing":[["F2","F2"],["F2","Y"]]},color:{Green:[["C1","G1","D1"]],Blue:[["C1","G1","D2","D2"],["C1","G1","D2","Y"]],Purple:[["C1","G2","G2","D1"]],Red:[["C1","G2","G2","D2","D2"],["C1","G2","G2","D2","Y"]],Albino:[["C2","C2"]]},metallic:{Metallic:[["M1"]],Nonmetallic:[["M2","M2"]]}},getImageName:function(f){},makeAlive:function(f){}};BioLogica.Species=BioLogica.Species||{};BioLogica.Species.GGTournamentDrake={name:"GGTournamentDrake",chromosomeNames:["1","2","XY"],chromosomeGeneMap:{"1":["T3","W2"],"2":["H2","B2","G2","S2"],XY:["N2","F2"]},chromosomesLength:{"1":100000000,"2":100000000,XY:70000000},geneList:{tail:{alleles:["T1","T2","T3","T4"],start:10000000,length:10584},wings:{alleles:["W1","W2"],start:70000000,length:9094},horns:{alleles:["H1","H2","H3"],start:15000000,length:19421},backfin:{alleles:["B1","B2"],start:45000000,length:64572},green:{alleles:["G1","G2"],start:55000000,length:17596},spikes:{alleles:["S1","S2"],start:90000000,length:6371},neckpattern:{alleles:["N1","N2"],start:40000000,length:14003},firebreathing:{alleles:["F1","F2"],start:60000000,length:1000}},alleleLabelMap:{T1:"Long tail",T2:"Kinked tail",T3:"Short tail",T4:"Fat tail",W1:"Wings",W2:"No wings",H1:"No horns",H2:"Horns",H3:"Upward horns",B1:"Small fin",B2:"Large fin",G1:"Green",G2:"Purple",S1:"Spikes wide",S2:"Spikes narrow",F1:"No fire breathing",F2:"Fire breathing",N1:"Spotted neck",N2:"Striped neck",Y:"Y","":""},traitRules:{tail:{"Long tail":[["T1","T1"],["T1","T2"],["T1","T3"],["T1","T4"]],"Kinked tail":[["T2","T2"],["T2","T3"],["T2","T4"]],"Short tail":[["T3","T3"],["T3","T4"]],"Fat tail":[["T4","T4"]]},wings:{Wings:[["W1","W1"],["W1","W2"]],"No wings":[["W2","W2"]]},spikes:{"Wide spikes":[["S1","S1"]],"Medium spikes":[["S1","S2"]],"Narrow spikes":[["S2","S2"]]},horns:{"Reverse horns":[["H1","H1"],["H1","H2"],["H1","H3"]],"Forward horns":[["H2","H2"],["H2","H3"]],"Upward horns":[["H3","H3"]]},"fire breathing":{"No fire breathing":[["F1"]],"Fire breathing":[["F2","F2"],["F2","Y"]]},fin:{"Small fin":[["B1","B1"]],"Medium fin":[["B1","B2"]],"Large fin":[["B2","B2"]]},neckpattern:{"Spotted neck":[["N1","N1"],["N1","N2"],["N1","Y"]],"Striped neck":[["N2","N2"],["N2","Y"]]},color:{Green:[["G1","G1"],["G1","G2"]],Purple:[["G2","G2"]]}},getImageName:function(f){},makeAlive:function(f){}};BioLogica.Species=BioLogica.Species||{};BioLogica.Species.GGLizard={name:"GGLizard",chromosomeNames:["1","2","XY"],chromosomeGeneMap:{"1":["R3","M2","W2","E2"],"2":["Q2","C2","G2","L2"],XY:["D2","V2"]},chromosomesLength:{"1":100000000,"2":100000000,XY:70000000},geneList:{ridges:{alleles:["R1","R2","R3"],start:10000000,length:10584},metallic:{alleles:["M1","M2"],start:20000000,length:259610},wings:{alleles:["W1","W2"],start:70000000,length:9094},armor:{alleles:["E1","E2"],start:80000000,length:122234},quill:{alleles:["Q1","Q2"],start:15000000,length:19421},color:{alleles:["C1","C2"],start:45000000,length:64572},green:{alleles:["G1","G2"],start:55000000,length:17596},legs:{alleles:["L1","L2"],start:90000000,length:6371},dilute:{alleles:["D1","D2"],start:20000000,length:152673},venomous:{alleles:["V1","V2"],start:60000000,length:1000}},alleleLabelMap:{R1:"Squared ridges",R2:"Rounded ridges",R3:"Pointy ridges",M1:"Metallic",M2:"Nonmetallic",W1:"Wings",W2:"No wings",Q1:"Quill 1",Q2:"Quill 2",C1:"Colored",C2:"Colorless",E1:"No ear flaps",E2:"Ear flaps",L1:"Long legs",L2:"Short legs",G1:"Green",G2:"Purple",D1:"Full color",D2:"Dilute color",V1:"Not venomous",V2:"Venomous",Y:"Y","":""},traitRules:{ridges:{"Squared ridges":[["R1","R1"],["R1","R2"],["R1","R3"]],"Rounded ridges":[["R2","R2"],["R2","R3"]],"Pointy ridges":[["R3","R3"]]},wings:{Wings:[["W1"]],"No wings":[["W2","W2"]]},quill:{"Quill 1":[["Q1"]],"Quill 2":[["Q2","Q2"]]},"ear flaps":{"No ear flaps":[["E1"]],"Ear flaps":[["E2","E2"]]},legs:{"Long legs":[["L1","L1"]],"Medium legs":[["L1","L2"]],"Short legs":[["L2","L2"]]},venomous:{"Non venomous":[["V1"]],Venomous:[["V2","V2"],["V2","Y"]]},color:{Green:[["G1","D1"]],Blue:[["G1","D2","D2"],["G1","D2","Y"]],Purple:[["G2","G2","D1"]],Red:[["G2","G2","D2","D2"],["G2","G2","D2","Y"]]},metallic:{Metallic:[["M1"]],Nonmetallic:[["M2","M2"]]}},getImageName:function(f){},makeAlive:function(f){}}}).call(this);