(function(){var d,c,b={}.hasOwnProperty,a=[].indexOf||function(g){for(var f=0,e=this.length;f<e;f++){if(f in this&&this[f]===g){return f}}return -1};Array.prototype.remove=function(g,f){var e;e=this.slice((f||g)+1||this.length);this.length=g<0?this.length+g:g;return this.push.apply(this,e)};Array.prototype.removeObj=function(f){var e;e=this.indexOf(f);if(~e){this.remove(e);return true}else{return false}};Array.prototype.replaceFirst=function(f,e){return this[this.indexOf(f)]=e};Array.prototype.shuffle=function(){var g,e,f;f=this.length;if(f){while(--f){g=Math.floor(Math.random()*(f+1));e=this[g];this[g]=this[f];this[f]=e}}return this};d=function(g,f){var e;e=g.indexOf(f);if(e>=0){g.splice(e,1);return true}else{return false}};c=function(h){var g,e,f;f=h.length;if(f){while(--f){g=Math.floor(Math.random()*(f+1));e=h[g];h[g]=h[f];h[f]=e}}return h};window.ExtMath={};ExtMath.randomInt=function(e){return Math.floor(Math.random()*e)};ExtMath.flip=function(){return ExtMath.randomInt(2)};window.BioLogica={};BioLogica.FEMALE=1;BioLogica.MALE=0;BioLogica.combinations=function(k){var g,q,o,i,n,j,h,f,e,p;p=[];o=k[0];if(k.length===1){return o.slice(0)}q=BioLogica.combinations(k.slice(1));for(i=0,n=q.length;i<n;i++){g=q[i];if(typeof g==="string"){g=[g]}for(h=0,j=o.length;h<j;h++){f=o[h];e=g.slice(0);e.unshift(f);p.push(e)}}return p.slice(0)};BioLogica.Chromosome=(function(){function e(f,p,o,j){var n,m,h,g,q,k;this.species=f;this.chromosome=p;k=[];this.alleles=j.sort((function(i){return function(r,l){if(i.getAllelesPosition(r)>i.getAllelesPosition(l)){return 1}else{return -1}}})(this)).filter((function(i){return function(l){var r;r=i.getGeneOfAllele(l);if(k.indexOf(r)!==-1){if(typeof console!=="undefined"&&console!==null){console.warn("Duplicate allele found: "+l)}return false}k.push(r);return true}})(this));if(typeof o==="object"){this.side=o[0]}else{this.side=o}this.allelesWithSides=[];for(m=h=0,g=this.alleles.length;0<=g?h<g:h>g;m=0<=g?++h:--h){n=this.alleles[m];q=typeof o==="object"?o[m]:this.side;this.allelesWithSides.push({allele:n,side:q})}}e.prototype.clone=function(f){return new BioLogica.Chromosome(this.species,this.chromosome,f||this.side,this.alleles.slice(0))};e.prototype.lengthInCentimorgans=100;e.prototype.getlengthInBasePairs=function(){return this.species.chromosomesLength[this.chromosome]};e.prototype.getGeneOfAllele=function(f){var g;return(g=BioLogica.Genetics.getGeneOfAllele(this.species,f))!=null?g.name:void 0};e.prototype.getAllelesPosition=function(f){var h,g;h=this.getGeneOfAllele(f);return((g=this.species.geneList[h])!=null?g.start:void 0)||-1};e.prototype.replaceAllele=function(g,h){var f;f=this.alleles.indexOf(g);if(f>=0){return this.alleles[f]=h}};return e})();BioLogica.Chromosome.createChromosome=function(q,o,j){var f,r,p,k,g,n,h,m,e;h=[];m=[];p=[];e=q.alleles;for(k=g=0,n=e.length;g<n;k=++g){f=e[k];if(q.getAllelesPosition(f)<j){h.push(f);m.push(q.allelesWithSides[k].side)}else{h.push(o.alleles[k]);m.push(o.allelesWithSides[k].side);p.push([f,o.alleles[k]])}}r=new BioLogica.Chromosome(q.species,q.chromosome,m,h);r.crossedAlleles=p;return r};BioLogica.Genotype=(function(){function e(k,f,i){var h,g,m,j,l;this.sex=i;this.chromosomes={};this.allAlleles=[];for(g in f){if(!b.call(f,g)){continue}l=f[g];this.chromosomes[g]={};for(j in l){if(!b.call(l,j)){continue}h=l[j];if(j==="y"){h=[]}this.chromosomes[g][j]=new BioLogica.Chromosome(k,g,j,h.slice(0));this.allAlleles=this.allAlleles.concat(h.slice(0))}}if(this.sex==null){this.sex=((m=this.chromosomes.XY)!=null?m.y:void 0)!=null?BioLogica.MALE:BioLogica.FEMALE}}e.prototype.containsAlleles=function(h){var j,i,g,f;j=this.allAlleles.slice(0);if(this.sex===BioLogica.MALE){j.push("Y")}for(g=0,f=h.length;g<f;g++){i=h[g];if(!d(j,i)){return false}}return true};e.prototype.replaceAlleleChromName=function(f,i,j,k){var g,h;h=this.chromosomes[f];g=(h!=null)&&h[i];if(g!=null){return this.replaceAllele(g,j,k)}};e.prototype.replaceAllele=function(f,h,i){var g;f.replaceAllele(h,i);g=this.allAlleles.indexOf(h);if(g>=0){return this.allAlleles[g]=i}};e.prototype.getAlleleString=function(n,m){var f,r,k,t,y,s,v,w,u,x,h,j,q,p,o,g;if(n==null){n=[]}if(m==null){m=null}r="";j=this.chromosomes;for(y in j){if(!b.call(j,y)){continue}v=j[y];for(g in v){if(!b.call(v,g)){continue}s=v[g];k=s.alleles;h=g==="x"?"y":g==="x1"?"x2":"b";if(g==="x"||g==="x1"){g="a"}if(g!=="a"){continue}for(w=u=0,x=k.length;u<x;w=++u){f=k[w];if((n.length===0)||(q=m.geneForAllele(f),a.call(n,q)>=0)){r+=g+":"+f+",";if(v[h]){t=(p=v[h])!=null?p.alleles[w]:void 0;if(t){r+="b:"+((o=v[h])!=null?o.alleles[w]:void 0)+","}}}}}}return r.substring(0,r.length-1)};return e})();BioLogica.Genetics=(function(){function e(i,g,h){var f;this.species=i;this.alleles=g;f=typeof this.alleles==="string"?this.convertAlleleStringToGenotypeHash(this.alleles,h):this.alleles;this.topUpChromosomes(f);this.genotype=new BioLogica.Genotype(this.species,f,h)}e.prototype.convertAlleleStringToGenotypeHash=function(u,r){var i,n,t,f,k,p,o,j,h,q,g,s;s=BioLogica.Genetics.parseAlleleString(u);f={};h=this.species.chromosomeNames;for(k=0,p=h.length;k<p;k++){t=h[k];f[t]={};g=this.getSides(t,r);f[t][g[0]]=[];f[t][g[1]]=[]}for(q in s){if(!b.call(s,q)){continue}n=s[q];if(!n){continue}for(j=0,o=n.length;j<o;j++){i=n[j];if(~i.indexOf("/")){i=this.selectOption(i)}t=this.findChromosome(i);if(!t){continue}g=this.getSides(t,r);f[t][q==="a"?g[0]:g[1]].push(i)}}return f};e.prototype.selectOption=function(f){var h,i,g;i=(function(){var k,j,n,m;n=f.split("/");m=[];for(k=0,j=n.length;k<j;k++){h=n[k];m.push(h.trim())}return m})();g=Math.floor(Math.random()*i.length);return i[g]};e.prototype.getAlleleString=function(){return this.genotype.getAlleleString()};e.prototype.getAlleleStringForTrait=function(o){var p,g,i,k,j,m,h,n,f;m=[];g=[];f=this.species.traitRules[o];for(k in f){if(!b.call(f,k)){continue}i=f[k];g=g.concat(i.reduce(function(q,l){return q.concat(l)},[]))}g=g.reduce(function(l,q){if(l.indexOf(q)<0){l.push(q)}return l},[]);for(h=0,n=g.length;h<n;h++){p=g[h];j=this.geneForAllele(p);if(a.call(m,j)<0){m.push(this.geneForAllele(p))}}return this.genotype.getAlleleString(m,this)};e.prototype.topUpChromosomes=function(f){var j,g,l,k,i,h;i=[];for(j in f){if(!b.call(f,j)){continue}g=f[j];k=this.species.chromosomeGeneMap[j];i.push((function(){var n,m,o;o=[];for(n=0,m=k.length;n<m;n++){l=k[n];o.push((function(){var p;p=[];for(h in g){if(!b.call(g,h)){continue}if(!(this.chromosomeContainsGene(f[j][h],l)||h==="y")){p.push(f[j][h].push(this.getRandomAllele(l)))}else{p.push(void 0)}}return p}).call(this))}return o}).call(this))}return i};e.prototype.getSides=function(f,g){if(f!=="XY"){return["a","b"]}else{if(g===BioLogica.FEMALE){return["x1","x2"]}else{return["x","y"]}}};e.prototype.isAlleleOfGene=function(f,i){var h,j,g;g=this.species.geneList;for(j in g){if(!b.call(g,j)){continue}h=this.species.geneList[j].alleles;if(a.call(h,f)>=0&&a.call(h,i)>=0){return true}}return false};e.prototype.geneForAllele=function(f){var h,i,g;g=this.species.geneList;for(i in g){if(!b.call(g,i)){continue}h=this.species.geneList[i].alleles;if(a.call(h,f)>=0){return i}}};e.prototype.findChromosome=function(j){var h,m,i,g,f,k;k=this.species.chromosomeGeneMap;for(h in k){i=k[h];for(g=0,f=i.length;g<f;g++){m=i[g];if(this.isAlleleOfGene(j,m)){return h}}}return false};e.prototype.chromosomeContainsGene=function(h,j){var i,g,f;for(g=0,f=h.length;g<f;g++){i=h[g];if(this.isAlleleOfGene(i,j)){return true}}return false};e.prototype.getRandomAllele=function(j){var f,i,k,g,h;h=this.species.geneList;for(k in h){if(!b.call(h,k)){continue}f=this.species.geneList[k].alleles;if(a.call(f,j)>=0){i=f;break}}g=Math.floor(Math.random()*i.length);return i[g]};e.prototype.filter=function(f,g){return f.filter((function(h){return function(k){var m,j,i;for(j=0,i=g.length;j<i;j++){m=g[j];if(h.isAlleleOfGene(k,m)){return true}}return false}})(this))};e.prototype.performMeiosis=function(r){var f,k,x,E,s,v,z,p,q,h,u,F,B,A,y,C,w,o,t,g,D,n;k=[{},{},{},{}];u={};F={};o=this.genotype.chromosomes;for(s in o){if(!b.call(o,s)){continue}z=o[s];n={};D=["b2","b1","a2","a1"];p=false;for(g in z){if(!b.call(z,g)){continue}v=z[g];n[D.pop()]=v.clone();n[D.pop()]=v.clone();if(g==="y"){p=true}}h=null;if(r&&!p){h=this.crossover(n)}D=c(["b2","b1","a2","a1"]);F[s]={};for(B=y=0,C=k.length;y<C;B=++y){f=k[B];E=D[B];x=n[E];if(!r){x.side=this.getHaploidChromatidSide(x)}f[s]=x;F[s][E]=B;if(h!=null){for(A=w=0,t=h.length;0<=t?w<t:w>t;A=0<=t?++w:--w){q=h[A];if(q.start===E){q.start_cell=B}if(q.end===E){q.end_cell=B}}}}u[s]=h}return{cells:k,crossInfo:u,endCellInfo:F}};e.prototype.getHaploidChromatidSide=function(f){if(f.side==="b"){return"a"}else{if(f.side==="x1"||f.side==="x2"){return"x"}else{return f.side}}};e.prototype.crossover=function(f){var k,j,n,g,i,o,m,h;k=this.createCrossoverPoints(f.a1);j=[];for(g=0,i=k.length;g<i;g++){m=k[g];h=["a1","a2"][ExtMath.flip()];n=["b1","b2"][ExtMath.flip()];o=this.crossChromatids(f[h],f[n],m);f[h]=o[0];f[n]=o[1];j.push({start:h,end:n,point:m,crossedAlleles:o[0].crossedAlleles.slice(0)})}return j};e.prototype.crossChromatids=function(h,g,f){return[BioLogica.Chromosome.createChromosome(h,g,f),BioLogica.Chromosome.createChromosome(g,h,f)]};e.prototype.createCrossoverPoints=function(m){var j,o,k,g,n,f,p,h;h=Math.floor(m.lengthInCentimorgans/10);o=(function(){var i,r,q;q=[];for(k=i=0,r=h;0<=r?i<r:i>r;k=0<=r?++i:--i){if(Math.random()<0.2){q.push(k)}}return q})();while(o.length>3){o.splice(ExtMath.randomInt(o.length),1)}f=m.getlengthInBasePairs()/h;for(k=g=0,n=o.length;g<n;k=++g){j=o[k];p=ExtMath.randomInt(f);o[k]=(j*f)+p}return o};return e})();BioLogica.Genetics.parseAlleleString=function(f){var g,e;return{a:(g=f.match(/a:([^,])*/g))!=null?g.map(function(i){var h;return(h=i.match(/[^:]+$/))!=null?h[0]:void 0}):void 0,b:(e=f.match(/b:([^,])*/g))!=null?e.map(function(i){var h;return(h=i.match(/[^:]+$/))!=null?h[0]:void 0}):void 0}};BioLogica.Genetics.getGeneOfAllele=function(e,f){var i,h,g;g=e.geneList;for(h in g){if(!b.call(g,h)){continue}i=g[h];if(~i.alleles.indexOf(f)){i.name=h;return i}}};BioLogica.Genetics.collectAllAllelesForTrait=function(l,n){var f,g,e,j,k,m,h;e={};g=[];for(j in n[l]){for(h in n[l][j]){if(n[l][j].hasOwnProperty(h)){k=0;m=n[l][j][h].length;while(k<m){e[n[l][j][h][k]]=1;k++}}}}for(f in e){g.push(f)}return g};BioLogica.Phenotype=(function(){function e(i){var m,j,n,g,k,f,h,o;this.characteristics={};this.allCharacteristics=[];h=i.species.traitRules;for(o in h){if(!b.call(h,o)){continue}f=h[o];for(k in f){if(!b.call(f,k)){continue}g=f[k];for(j=0,n=g.length;j<n;j++){m=g[j];if(i.genotype.containsAlleles(m)){this.characteristics[o]=k;this.allCharacteristics.push(k);break}}if(this.characteristics[o]){break}}}}return e})();BioLogica.Phenotype.numberOfChangesToReachPhenotype=function(f,h,g){var e;f=BioLogica.Organism.ensureValidOrganism(f,g);h=BioLogica.Organism.ensureValidOrganism(h,g);e=BioLogica.Phenotype.numberOfAlleleChangesToReachPhenotype(f.phenotype.characteristics,h.phenotype.characteristics,f.genetics.genotype.allAlleles,f.species.traitRules);if(f.sex!==h.sex){++e}return e};BioLogica.Phenotype.numberOfAlleleChangesToReachPhenotype=function(q,l,r,g){var f,h,u,p,t,w,s,e,z,v,m,y,x,o,n;f=r;z=0;for(n in g){if(g.hasOwnProperty(n)){if(q[n]!==l[n]){y=BioLogica.Genetics.collectAllAllelesForTrait(n,g);h=[];u=0;p=f.length;while(u<p){if(y.indexOf(f[u])>=0){h.push(f[u])}u++}m=g[n][l[n]];x=Infinity;t=0;w=m.length;while(t<w){o=m[t].slice();v=0;s=0;e=h.length;while(s<e){if(o.indexOf(h[s])===-1){v++}else{o.splice(o.indexOf(h[s]),1)}s++}x=v<x?v:x;t++}z+=x}}}return z};BioLogica.Organism=(function(){function e(h,g,f){this.species=h;this.sex=f;this.alleles=typeof g==="string"?this.preProcessAlleleString(g):g;this.genetics=new BioLogica.Genetics(this.species,this.alleles,this.sex);if(this.sex==null){this.sex=this.genetics.genotype.sex}this.resetPhenotype()}e.prototype.getGenotype=function(){return this.genetics.genotype};e.prototype.resetPhenotype=function(){return this.phenotype=new BioLogica.Phenotype(this.genetics)};e.prototype.getCharacteristic=function(f){return this.phenotype.characteristics[f]};e.prototype.getAllCharacteristics=function(){return this.phenotype.allCharacteristics};e.prototype.getImageName=function(){return this.species.getImageName(this)};e.prototype.getAlleleString=function(){return this.genetics.getAlleleString()};e.prototype.getAlleleStringForTrait=function(f){return this.genetics.getAlleleStringForTrait(f)};e.prototype.createGametes=function(m,h){var g,j,f,k;if(h==null){h=true}g=[];for(j=f=0,k=Math.floor(m/4);0<=k?f<k:f>k;j=0<=k?++f:--f){g=g.concat(this.genetics.performMeiosis(h).cells)}g=g.concat(this.genetics.performMeiosis(h).cells.slice(0,m%4));if(g.length===1){return g[0]}else{return g}};e.prototype.createGametesWithCrossInfo=function(m,h){var g,j,f,k;if(h==null){h=true}g=[];for(j=f=0,k=Math.floor(m/4);0<=k?f<k:f>k;j=0<=k?++f:--f){g=g.concat(this.genetics.performMeiosis(h))}if(m%4!==0){g=g.concat(this.genetics.performMeiosis(h))}return g};e.prototype.preProcessAlleleString=function(f){return f.replace(/,+$/,"")};e.prototype.toString=function(){var f,g;g=this.sex===BioLogica.FEMALE?"female":"male";f=this.genetics.genotype.allAlleles;return"Organism: {sex: "+g+", authored alleles: "+this.alleles+", alleles: "+f};return e})();BioLogica.Organism.createOrganism=function(f,e,g){if(e==null){e=""}if(g==null){g=ExtMath.flip()?BioLogica.FEMALE:BioLogica.MALE}return new BioLogica.Organism(f,e,g)};BioLogica.Organism.createLiveOrganism=function(f,e,g){var h;if(e==null){e=""}if(g==null){g=ExtMath.flip()?BioLogica.FEMALE:BioLogica.MALE}h=new BioLogica.Organism(f,e,g);h.species.makeAlive(h);return h};BioLogica.Organism.createFromGametes=function(n,m,g){var k,h,l,f,e,j;for(j in g){f=g[j];if(f.side==="a"){f.side="b"}}for(j in m){f=m[j];if(f.side==="b"){f.side="a"}}if(g.XY.side==="y"){m.XY.side="x"}else{m.XY.side="x1";g.XY.side="x2"}e={};for(l in m){if(!b.call(m,l)){continue}k=m[l];h=g[l];e[l]={};e[l][k.side]=k.alleles;e[l][h.side]=h.alleles}return new BioLogica.Organism(n,e)};BioLogica.Organism.ensureValidOrganism=function(f,e){if(f.getAlleleString){return f}return new BioLogica.Organism(e,f.alleleString,f.sex)};BioLogica.Organism.numberOfBreedingMovesToReachOrganism=function(f,e,v,u,g){var y,w,z,r,x,A,C,t,s,h,k,o,n,q,m,B,p,l;C=0;h=f.getAlleleString().split(",").map(function(i){return i.split(":")[1]});k=e.getAlleleString().split(",").map(function(i){return i.split(":")[1]});B=g.phenotype.characteristics;l=f.species.traitRules;for(p in l){if(l.hasOwnProperty(p)){o=l[p][B[p]];n=Infinity;if(o&&o.length){z=0;r=o.length;while(z<r){q=o[z];t=0;s=0;x=0;A=q.length;while(x<A){y=q[x];w=x%2===0?q[x+1]:q[x-1];m=0;if(h.indexOf(y)===-1){if(y&&(v.indexOf(y)>-1||v.indexOf(y.toLowerCase())>-1)){m++}else{m=Infinity}}if(k.indexOf(w)===-1){if(w&&(u.indexOf(w)>-1||u.indexOf(w.toLowerCase())>-1)){m++}else{m=Infinity}}if(x%2===0){t+=m}else{s+=m}x++}n=Math.min(n,Math.min(t,s));z++}C+=n}}}return C};BioLogica.breed=function(h,g,i){var f,e;f=h.createGametes(1,i);e=g.createGametes(1,i);return BioLogica.Organism.createFromGametes(h.species,f,e)};BioLogica.Species=BioLogica.Species||{};BioLogica.Species.Dragon={name:"Dragon",chromosomeNames:["1","2","XY"],chromosomeGeneMap:{"1":["h","s"],"2":["w","l","t"],XY:["p","f","a","b"]},chromosomesLength:{"1":100000000,"2":100000000,XY:70000000},geneList:{horns:{alleles:["H","h","HU"],start:5000000,length:5333},scales:{alleles:["S","s"],start:7500000,length:7667},wings:{alleles:["W","w","wd"],start:2769231,length:25128},legs:{alleles:["L","l"],start:4615385,length:19230},tail:{alleles:["T","t","ta"],start:6153846,length:10256},plates:{alleles:["P","p"],start:2333333,length:6000},fire:{alleles:["F","f","fb"],start:3033333,length:26600},color1:{alleles:["A","a","aw"],start:4200000,length:26133},color2:{alleles:["B","b"],start:6020000,length:32200}},alleleLabelMap:{H:"Horns",h:"No horns",HU:"Unicorn",S:"No scales",s:"Scales",W:"No wings",w:"Wings",wd:"Double wings",L:"Legs",l:"No legs",T:"Fancy tail",t:"Plain tail",ta:"Arrow tail",P:"Plates",p:"No plates",F:"No fire",f:"Fire",fb:"Blue fire",A:"Color A",a:"Color a",aw:"Color aw",B:"Color B",b:"Color b",Y:"Y","":""},traitRules:{horns:{Horns:[["H","H"],["H","h"]],"No Horns":[["h","h"]],Unicorn:[["HU","H"],["HU","h"],["HU","HU"]]},scales:{Scales:[["s","s"]],"No Scales":[["S","S"],["S","s"]]},wings:{"Double Wings":[["wd","wd"],["wd","w"]],Wings:[["w","w"],["W","wd"]],"No Wings":[["W","W"],["W","w"]]},legs:{"Four Legs":[["L","L"]],"Two Legs":[["L","l"]],"No Legs":[["l","l"]]},tail:{"Fancy Tail":[["T","T"],["T","t"],["T","ta"]],"Plain Tail":[["t","t"],["t","ta"]],"Arrow Tail":[["ta","ta"]]},fire:{"No Fire":[["F","F"],["F","f"],["F","fb"],["F","Y"]],Fire:[["f","f"],["f","fb"],["f","Y"]],"Blue Fire":[["fb","fb"],["fb","Y"]]},color:{Green:[["A","B","Y"],["A","b","Y"]],Yellow:[["a","B","Y"],["a","b","Y"]],Red:[["A","A","B","B"],["A","a","B","B"]],Purple:[["a","a","B","B"]],Brown:[["A","A","B","b"],["A","A","b","b"],["A","a","B","b"],["A","a","b","b"]],Blue:[["a","a","B","b"],["a","a","b","b"]],Albino:BioLogica.combinations([["aw"],["A","a","aw"],["B","b"],["B","b"]]).concat(BioLogica.combinations([["aw"],["B","b"],["Y"]]))},plates:{"Big Plates":[["P","P"]],"Little Plates":[["P","p"],["P","Y"]],"No Plates":[["p","p"],["p","Y"]]},liveliness:{Alive:[["B","B"],["B","b"],["B","Y"]],Dead:[["b","b"],["b","Y"]]}},getImageName:function(e){return void 0},makeAlive:function(h){var e,g,f;if(h.getCharacteristic("liveliness")==="Dead"){if(h.sex===BioLogica.MALE){e=h.getGenotype().chromosomes.XY["x"]}else{g=h.getGenotype().chromosomes.XY["x1"];f=h.getGenotype().chromosomes.XY["x2"];if(a.call(g.alleles,"b")>=0){if(a.call(f.alleles,"b")>=0){e=ExtMath.flip()?g:f}else{e=g}}else{e=f}}h.getGenotype().replaceAllele(e,"b","B");return h.resetPhenotype()}}};BioLogica.Species=BioLogica.Species||{};BioLogica.Species.GGDrake={name:"GGDrake",chromosomeNames:["1","2","XY"],chromosomeGeneMap:{"1":["T3","M2","W2","A2"],"2":["H2","C2","G2","S2"],XY:["D2","F2"]},chromosomesLength:{"1":100000000,"2":100000000,XY:70000000},geneList:{tail:{alleles:["T1","T2","T3"],start:10000000,length:10584},metallic:{alleles:["M1","M2"],start:20000000,length:259610},wings:{alleles:["W1","W2"],start:70000000,length:9094},armor:{alleles:["A1","A2"],start:80000000,length:122234},horns:{alleles:["H1","H2"],start:15000000,length:19421},color:{alleles:["C1","C2"],start:45000000,length:64572},green:{alleles:["G1","G2"],start:55000000,length:17596},spikes:{alleles:["S1","S2"],start:90000000,length:6371},dilute:{alleles:["D1","D2"],start:20000000,length:152673},firebreathing:{alleles:["F1","F2"],start:60000000,length:1000}},alleleLabelMap:{T1:"Long tail",T2:"Kinked tail",T3:"Short tail",M1:"Metallic",M2:"Nonmetallic",W1:"Wings",W2:"No wings",H1:"No horns",H2:"Horns",C1:"Colored",C2:"Colorless",A1:"No armor",A2:"Armor",S1:"Spikes wide",S2:"Spikes narrow",G1:"Green",G2:"Purple",D1:"Full color",D2:"Dilute color",F1:"No fire breathing",F2:"Fire breathing",Y:"Y","":""},traitRules:{tail:{"Long tail":[["T1","T1"],["T1","T2"],["T1","T3"]],"Kinked tail":[["T2","T2"],["T2","T3"]],"Short tail":[["T3","T3"]]},wings:{Wings:[["W1","W1"],["W1","W2"]],"No wings":[["W2","W2"]]},horns:{"Reverse horns":[["H1","H1"],["H1","H2"]],"Forward horns":[["H2","H2"]]},armor:{"No armor":[["A1","A1"],["A1","A2"]],Armor:[["A2","A2"]]},spikes:{"Wide spikes":[["S1","S1"]],"Medium spikes":[["S1","S2"]],"Narrow spikes":[["S2","S2"]]},"fire breathing":{"No fire breathing":[["F1"]],"Fire breathing":[["F2","F2"],["F2","Y"]]},color:{Green:[["C1","G1","D1"]],Blue:[["C1","G1","D2","D2"],["C1","G1","D2","Y"]],Purple:[["C1","G2","G2","D1"]],Red:[["C1","G2","G2","D2","D2"],["C1","G2","G2","D2","Y"]],Albino:[["C2","C2"]]},metallic:{Metallic:[["M1"]],Nonmetallic:[["M2","M2"]]}},getImageName:function(e){},makeAlive:function(e){}};BioLogica.Species=BioLogica.Species||{};BioLogica.Species.Drake={name:"Drake",chromosomeNames:["1","2","XY"],chromosomeGeneMap:{"1":["t","m","w","h"],"2":["c","b","fl","hl","a"],XY:["d","rh","bog"]},chromosomesLength:{"1":100000000,"2":100000000,XY:70000000},geneList:{tail:{alleles:["T","Tk","t"],start:10000000,length:10584},metallic:{alleles:["M","m"],start:20000000,length:259610},wings:{alleles:["W","w"],start:70000000,length:9094},horns:{alleles:["H","h"],start:85000000,length:19421},color:{alleles:["C","c"],start:15000000,length:64572},black:{alleles:["B","b"],start:25000000,length:17596},forelimbs:{alleles:["Fl","fl"],start:80000000,length:122234},hindlimbs:{alleles:["Hl","hl"],start:85000000,length:6371},armor:{alleles:["A1","A2","a"],start:90000000,length:425156},dilute:{alleles:["D","d","dl"],start:20000000,length:152673},bogbreath:{alleles:["Bog","bog"],start:22000000,length:199642},nose:{alleles:["Rh","rh"],start:60000000,length:2950}},alleleLabelMap:{T:"Long tail",Tk:"Kinked tail",t:"Short tail",M:"Shiny",m:"Dull",W:"Wings",w:"Wingless",H:"Hornless",h:"Horns",C:"Color",c:"Albino",Fl:"Arms",fl:"Armless",Hl:"Legs",hl:"Legless",A1:"Full armor",A2:"Partial armor",a:"No armor",B:"Gray",b:"Orange",D:"Deep",d:"Faded",dl:"dl",Rh:"Spiked",rh:"Spikeless",Bog:"Normal",bog:"Bog breath",Y:"Y","":""},traitRules:{armor:{"Five armor":[["A1","A1"],["A1","A2"]],"Three armor":[["A1","a"],["A2","A2"]],"One armor":[["A2","a"]],"No armor":[["a","a"]]},tail:{"Long tail":[["T","T"],["T","Tk"],["T","t"]],"Kinked tail":[["Tk","Tk"],["Tk","t"]],"Short tail":[["t","t"]]},forelimbs:{Forelimbs:[["Fl","Fl"],["Fl","fl"]],"No forelimbs":[["fl","fl"]]},hindlimbs:{Hindlimbs:[["Hl","Hl"],["Hl","hl"]],"No hindlimbs":[["hl","hl"]]},horns:{Hornless:[["H","H"],["H","h"]],Horns:[["h","h"]]},"nose spike":{"Nose spike":BioLogica.combinations([["Rh"],["Rh","rh","Y"]]),"No nose spike":[["rh","rh"],["rh","Y"]]},wings:{Wings:[["W","W"],["W","w"]],"No wings":[["w","w"]]},color:{Frost:[["c","c"]],Steel:BioLogica.combinations([["C"],["C","c"],["M"],["M","m"],["B"],["B","b"],["D"],["D","d","dl","Y"]]),Copper:BioLogica.combinations([["C"],["C","c"],["M"],["M","m"],["b"],["b"],["D"],["D","d","dl","Y"]]),Silver:BioLogica.combinations([["C"],["C","c"],["M"],["M","m"],["B"],["B","b"],["d","dl"],["d","dl","Y"]]),Gold:BioLogica.combinations([["C"],["C","c"],["M"],["M","m"],["b"],["b"],["d","dl"],["d","dl","Y"]]),Charcoal:BioLogica.combinations([["C"],["C","c"],["m"],["m"],["B"],["B","b"],["D"],["D","d","dl","Y"]]),Lava:BioLogica.combinations([["C"],["C","c"],["m"],["m"],["b"],["b"],["D"],["D","d","dl","Y"]]),Ash:BioLogica.combinations([["C"],["C","c"],["m"],["m"],["B"],["B","b"],["d","dl"],["d","dl","Y"]]),Sand:BioLogica.combinations([["C"],["C","c"],["m"],["m"],["b"],["b"],["d","dl"],["d","dl","Y"]])},health:{"Bog breath":[["bog","bog"],["bog","Y"]],Healthy:[["Bog","Bog"],["Bog","bog"],["Bog","Y"]]},liveliness:{Alive:BioLogica.combinations([["D","d"],["D","d","dl","Y"]]),Dead:[["dl","dl"],["dl","Y"]]}},getImageName:function(i){var e,h,f,g;f=function(j){return i.getCharacteristic(j)};if(f("liveliness")==="Dead"){return"dead-drake.png"}e="";g=f("color");if(g==="Silver"){g="Argent"}else{if(g==="Lava"){g="Earth"}else{if(g==="Ash"){g="Dust"}}}e+=g.toLowerCase().substring(0,2)+"_";e+=i.sex===BioLogica.FEMALE?"f_":"m_";e+=f("wings")==="Wings"?"wing_":"noWing_";h="";if(f("forelimbs")==="Forelimbs"){if(f("hindlimbs")==="Hindlimbs"){h="allLimb_"}else{h="fore_"}}else{if(f("hindlimbs")==="Hindlimbs"){h="hind_"}else{h="noLimb_"}}e+=h;e+=(function(){switch(f("armor")){case"Five armor":return"a5_";case"Three armor":return"a3_";case"One armor":return"a1_";default:return"a0_"}})();e+=(function(){switch(f("tail")){case"Long tail":return"flair_";case"Kinked tail":return"kink_";default:return"short_"}})();e+=f("horns")==="Horns"?"horn_":"noHorn_";e+=f("nose spike")==="Nose spike"?"rostral_":"noRostral_";e+=f("health")==="Bog breath"?"bogbreath":"healthy";return e+=".png"},makeAlive:function(h){var g,f,e;if(h.getCharacteristic("liveliness")==="Dead"){e=h.sex===BioLogica.MALE?"x":ExtMath.flip()?"x1":"x2";g=h.getGenotype().chromosomes.XY[e];f=ExtMath.flip()?"D":"d";h.getGenotype().replaceAllele(g,"dl",f);return h.resetPhenotype()}}};BioLogica.Species=BioLogica.Species||{};BioLogica.Species.GenivilleDrake={name:"GenivilleDrake",chromosomeNames:["1","2","XY"],chromosomeGeneMap:{"1":["t","m","w","h"],"2":["c","b","fl","hl","a"],XY:["d","rh","bog"]},chromosomesLength:{"1":100000000,"2":100000000,XY:70000000},geneList:{tail:{alleles:["T","Tk","t"],start:10000000,length:10584},metallic:{alleles:["M","m"],start:20000000,length:259610},wings:{alleles:["W","w"],start:70000000,length:9094},horns:{alleles:["H","h"],start:85000000,length:19421},color:{alleles:["C","c"],start:15000000,length:64572},black:{alleles:["B","b"],start:25000000,length:17596},forelimbs:{alleles:["Fl","fl"],start:80000000,length:122234},hindlimbs:{alleles:["Hl","hl"],start:85000000,length:6371},armor:{alleles:["A","a"],start:90000000,length:425156},dilute:{alleles:["D","d","dl"],start:20000000,length:152673},bogbreath:{alleles:["Bog","bog"],start:22000000,length:199642},nose:{alleles:["Rh","rh"],start:60000000,length:2950}},alleleLabelMap:{T:"Long tail",Tk:"Kinked tail",t:"Short tail",M:"Metallic",m:"Nonmetallic",W:"Wings",w:"No wings",H:"No horns",h:"Horns",C:"Colored",c:"Colorless",Fl:"Forelimbs",fl:"No forelimbs",Hl:"Hindlimbs",hl:"No hindlimbs",A:"Armor",a:"No armor",B:"Black",b:"Brown",D:"Full color",d:"Dilute color",dl:"dl",Rh:"Nose spike",rh:"No nose spike",Bog:"Healthy",bog:"Bog breath",Y:"Y","":""},traitRules:{armor:{"Five armor":[["A","A"]],"Three armor":[["A","a"]],"No armor":[["a","a"]]},tail:{"Long tail":[["T","T"],["T","Tk"],["T","t"]],"Kinked tail":[["Tk","Tk"],["Tk","t"]],"Short tail":[["t","t"]]},forelimbs:{Forelimbs:[["Fl","Fl"],["Fl","fl"]],"No forelimbs":[["fl","fl"]]},hindlimbs:{Hindlimbs:[["Hl","Hl"],["Hl","hl"]],"No hindlimbs":[["hl","hl"]]},horns:{Hornless:[["H","H"],["H","h"]],Horns:[["h","h"]]},"nose spike":{"Nose spike":BioLogica.combinations([["Rh"],["Rh","rh","Y"]]),"No nose spike":[["rh","rh"],["rh","Y"]]},wings:{Wings:[["W","W"],["W","w"]],"No wings":[["w","w"]]},color:{Frost:[["c","c"]],Steel:BioLogica.combinations([["C"],["C","c"],["M"],["M","m"],["B"],["B","b"],["D"],["D","d","dl","Y"]]),Copper:BioLogica.combinations([["C"],["C","c"],["M"],["M","m"],["b"],["b"],["D"],["D","d","dl","Y"]]),Silver:BioLogica.combinations([["C"],["C","c"],["M"],["M","m"],["B"],["B","b"],["d","dl"],["d","dl","Y"]]),Gold:BioLogica.combinations([["C"],["C","c"],["M"],["M","m"],["b"],["b"],["d","dl"],["d","dl","Y"]]),Charcoal:BioLogica.combinations([["C"],["C","c"],["m"],["m"],["B"],["B","b"],["D"],["D","d","dl","Y"]]),Lava:BioLogica.combinations([["C"],["C","c"],["m"],["m"],["b"],["b"],["D"],["D","d","dl","Y"]]),Ash:BioLogica.combinations([["C"],["C","c"],["m"],["m"],["B"],["B","b"],["d","dl"],["d","dl","Y"]]),Sand:BioLogica.combinations([["C"],["C","c"],["m"],["m"],["b"],["b"],["d","dl"],["d","dl","Y"]])},health:{"Bog breath":[["bog","bog"],["bog","Y"]],Healthy:[["Bog","Bog"],["Bog","bog"],["Bog","Y"]]},liveliness:{Alive:BioLogica.combinations([["D","d"],["D","d","dl","Y"]]),Dead:[["dl","dl"],["dl","Y"]]}},getImageName:function(i){var e,h,f,g;f=function(j){return i.getCharacteristic(j)};if(f("liveliness")==="Dead"){return"dead-GenivilleDrake.png"}e="";g=f("color");if(g==="Silver"){g="Argent"}else{if(g==="Lava"){g="Earth"}else{if(g==="Ash"){g="Dust"}}}e+=g.toLowerCase().substring(0,2)+"_";e+=i.sex===BioLogica.FEMALE?"f_":"m_";e+=f("wings")==="Wings"?"wing_":"noWing_";h="";if(f("forelimbs")==="Forelimbs"){if(f("hindlimbs")==="Hindlimbs"){h="allLimb_"}else{h="fore_"}}else{if(f("hindlimbs")==="Hindlimbs"){h="hind_"}else{h="noLimb_"}}e+=h;e+=(function(){switch(f("armor")){case"Five armor":return"a5_";case"Three armor":return"a3_";default:return"a0_"}})();e+=(function(){switch(f("tail")){case"Long tail":return"flair_";case"Kinked tail":return"kink_";default:return"short_"}})();e+=f("horns")==="Horns"?"horn_":"noHorn_";e+=f("nose spike")==="Nose spike"?"rostral_":"noRostral_";e+=f("health")==="Bog breath"?"bogbreath":"healthy";return e+=".png"},makeAlive:function(h){var g,f,e;if(h.getCharacteristic("liveliness")==="Dead"){e=h.sex===BioLogica.MALE?"x":ExtMath.flip()?"x1":"x2";g=h.getGenotype().chromosomes.XY[e];f=ExtMath.flip()?"D":"d";h.getGenotype().replaceAllele(g,"dl",f);return h.resetPhenotype()}}};BioLogica.Species=BioLogica.Species||{};BioLogica.Species.GGTournamentDrake={name:"GGTournamentDrake",chromosomeNames:["1","2","XY"],chromosomeGeneMap:{"1":["T3","W2"],"2":["H2","B2","G2","S2"],XY:["N2","F2"]},chromosomesLength:{"1":100000000,"2":100000000,XY:70000000},geneList:{tail:{alleles:["T1","T2","T3","T4"],start:10000000,length:10584},wings:{alleles:["W1","W2"],start:70000000,length:9094},horns:{alleles:["H1","H2","H3"],start:15000000,length:19421},backfin:{alleles:["B1","B2"],start:45000000,length:64572},green:{alleles:["G1","G2"],start:55000000,length:17596},spikes:{alleles:["S1","S2"],start:90000000,length:6371},neckpattern:{alleles:["N1","N2"],start:40000000,length:14003},firebreathing:{alleles:["F1","F2"],start:60000000,length:1000}},alleleLabelMap:{T1:"Long tail",T2:"Kinked tail",T3:"Short tail",T4:"Fat tail",W1:"Wings",W2:"No wings",H1:"No horns",H2:"Horns",H3:"Upward horns",B1:"Small fin",B2:"Large fin",G1:"Green",G2:"Purple",S1:"Spikes wide",S2:"Spikes narrow",F1:"No fire breathing",F2:"Fire breathing",N1:"Spotted neck",N2:"Striped neck",Y:"Y","":""},traitRules:{tail:{"Long tail":[["T1","T1"],["T1","T2"],["T1","T3"],["T1","T4"]],"Kinked tail":[["T2","T2"],["T2","T3"],["T2","T4"]],"Short tail":[["T3","T3"],["T3","T4"]],"Fat tail":[["T4","T4"]]},wings:{Wings:[["W1","W1"],["W1","W2"]],"No wings":[["W2","W2"]]},spikes:{"Wide spikes":[["S1","S1"]],"Medium spikes":[["S1","S2"]],"Narrow spikes":[["S2","S2"]]},horns:{"Reverse horns":[["H1","H1"],["H1","H2"],["H1","H3"]],"Forward horns":[["H2","H2"],["H2","H3"]],"Upward horns":[["H3","H3"]]},"fire breathing":{"No fire breathing":[["F1"]],"Fire breathing":[["F2","F2"],["F2","Y"]]},fin:{"Small fin":[["B1","B1"]],"Medium fin":[["B1","B2"]],"Large fin":[["B2","B2"]]},neckpattern:{"Spotted neck":[["N1","N1"],["N1","N2"],["N1","Y"]],"Striped neck":[["N2","N2"],["N2","Y"]]},color:{Green:[["G1","G1"],["G1","G2"]],Purple:[["G2","G2"]]}},getImageName:function(e){},makeAlive:function(e){}};BioLogica.Species=BioLogica.Species||{};BioLogica.Species.GGLizard={name:"GGLizard",chromosomeNames:["1","2","XY"],chromosomeGeneMap:{"1":["R3","M2","W2","E2"],"2":["Q2","C2","G2","L2"],XY:["D2","V2"]},chromosomesLength:{"1":100000000,"2":100000000,XY:70000000},geneList:{ridges:{alleles:["R1","R2","R3"],start:10000000,length:10584},metallic:{alleles:["M1","M2"],start:20000000,length:259610},wings:{alleles:["W1","W2"],start:70000000,length:9094},armor:{alleles:["E1","E2"],start:80000000,length:122234},quill:{alleles:["Q1","Q2"],start:15000000,length:19421},color:{alleles:["C1","C2"],start:45000000,length:64572},green:{alleles:["G1","G2"],start:55000000,length:17596},legs:{alleles:["L1","L2"],start:90000000,length:6371},dilute:{alleles:["D1","D2"],start:20000000,length:152673},venomous:{alleles:["V1","V2"],start:60000000,length:1000}},alleleLabelMap:{R1:"Squared ridges",R2:"Rounded ridges",R3:"Pointy ridges",M1:"Metallic",M2:"Nonmetallic",W1:"Wings",W2:"No wings",Q1:"Quill 1",Q2:"Quill 2",C1:"Colored",C2:"Colorless",E1:"No ear flaps",E2:"Ear flaps",L1:"Long legs",L2:"Short legs",G1:"Green",G2:"Purple",D1:"Full color",D2:"Dilute color",V1:"Not venomous",V2:"Venomous",Y:"Y","":""},traitRules:{ridges:{"Squared ridges":[["R1","R1"],["R1","R2"],["R1","R3"]],"Rounded ridges":[["R2","R2"],["R2","R3"]],"Pointy ridges":[["R3","R3"]]},wings:{Wings:[["W1"]],"No wings":[["W2","W2"]]},quill:{"Quill 1":[["Q1"]],"Quill 2":[["Q2","Q2"]]},"ear flaps":{"No ear flaps":[["E1"]],"Ear flaps":[["E2","E2"]]},legs:{"Long legs":[["L1","L1"]],"Medium legs":[["L1","L2"]],"Short legs":[["L2","L2"]]},venomous:{"Non venomous":[["V1"]],Venomous:[["V2","V2"],["V2","Y"]]},color:{Green:[["G1","D1"]],Blue:[["G1","D2","D2"],["G1","D2","Y"]],Purple:[["G2","G2","D1"]],Red:[["G2","G2","D2","D2"],["G2","G2","D2","Y"]]},metallic:{Metallic:[["M1"]],Nonmetallic:[["M2","M2"]]}},getImageName:function(e){},makeAlive:function(e){}}}).call(this);